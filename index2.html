<!DOCTYPE html>
<html>
    <head>
        <title>AJAX project 2</title>
    </head>
    <body>
        <h1>AJAX project 2</h1>
        <form onsubmit="sendData(this)">
            <input type="text" name="name" value="Google"/>
            <input type="text" name="url" value="https://www.google.com.tw/"/>
            <button type="submit">submit</button>
        </form>
        <button type="button" onclick="trigger()">trigger</button>
        <div id="test"></div>
        <script>
            function sendData(form){
                event.preventDefault();
                var formData=new FormData(form)
               
                trigger(formData)
            }


        function trigger(formData){
            
            var count=0;
            var xhr=new XMLHttpRequest;
            xhr.onreadystatechange=function(){
                if(this.readyState==4 && this.status==200){
                if(xhr.getResponseHeader("Content-Type")==="application/json; charset=UTF-8"){
                   var jasonStr=xhr.response; 
                }
            }else if( this.readyState==4 && this.status==405 ){
                        console.log("page not found")   
            }
            }
            xhr.open("POST","./postTest",true);
            xhr.setRequestHeader("Accept","application/json")
            xhr.setRequestHeader("Content-Type","application/json")
            // xhr.send(formData);
            var data=new FormData();
            data.append("name","progressBar");
            data.append("url","https://progressbar.com");
            xhr.send(data);



            // var object={
            //     name:"Google",
            //     url:"https://www.google.com.tw/"
            // }

            // xhr.send(JSON.stringify(object));
        }
        
        </script>
            
    </body>
</html>